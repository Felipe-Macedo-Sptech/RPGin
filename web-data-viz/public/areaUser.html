<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Cascadia+Code:ital,wght@0,200..700;1,200..700&family=Comic+Relief:wght@400;700&display=swap"
        rel="stylesheet">
    <title>Área do Usuário</title>
    <script src="./js/sessao.js"></script>
    <link rel="stylesheet" href="./CSS/areaUser.css">
</head>

<body onload="exibrTodasPostagem()">

    <!--header inicio-->
    <div class="header">
        <div class="container">
            <div class="logo">
                <img src="./img/4.png">                                                  
            </div>
            <div class="pesquisa">
                <input class="pesquisaAreaUser" type="text" placeholder="pesquisar no RPGin....">
            </div>
            <div class="acessoPerfil">
                <a href="perfil.html">ppp</a>
            </div>
        </div>
    </div>

    <div class="containerHome">
        <div class="areaPostagem">
            <div id="postagem"></div>
        </div>
        <div class="areaLateral">
            <div class="informacaoLateral">
                <div class="inicialLateral">
                    <p>Pagina inicial</p>
                    <p>Populares</p>
                    <p>Explorar</p>
                    <p>Tudo</p>
                </div>
                <div class="meioLateral">
                    <p>Assuntos</p>
                    <p>RPG populares</p>
                    <p>outros</p>
                </div>
                <div class="fimLaretal">
                    <p>Denuncie</p>
                    <p>Logout</p>
                </div>
            </div>
        </div>
    </div>


</body>

</html>
<script>
    function exibrTodasPostagem() {
        fetch("/postagem/exibirPostagem", {
            method: "GET",
            headers: {
                "Content-Type": "application/json"
            },
        })
            .then(res => res.json())
            .then(function (resultado) {
                var postagem = document.getElementById("postagem");
                resultado.forEach(function (post) {
                    var dataCerta = new Date(post.data_postagem).toLocaleDateString('pt-BR', {
                        hour: "2-digit",
                        minute: "2-digit",
                        hour12: false,
                        timeZone: "America/Sao_Paulo"
                    });
                    postagem.innerHTML += `
                        <div class="postagem">
                            <div class="emcima">
                                <span class="postagemNome">${post.nome}</span>
                                <span class="postagemData">${dataCerta}</span>
                            </div>
                            <div class="postagemTitulo">${post.titulo}</div>
                            <div class="postagemConteudo">${post.conteudo}</div>
                        </div>
                    `;
                });
            })
    }
</script>